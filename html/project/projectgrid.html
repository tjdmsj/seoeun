<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>project</title>
<style>
body {
margin: 0;
padding: 0;
font-family: sans-serif;
overflow-x: hidden;
}

header {
height: clamp(40px, 8vh, 60px);
display: flex;
align-items: center;
justify-content: center;
font-size: clamp(18px, 2vw, 20px);
font-weight: bold;
border-bottom: 1px solid #000;
}

  /* 푸터 스타일 변경 */
footer {
height: clamp(40px, 8vh, 60px);
border-top: 1px solid #000;
border-bottom: none;
font-weight: normal;
  display: flex; /* Flexbox로 내부 콘텐츠 정렬 */
  justify-content: center; /* 기본적으로 중앙 정렬 */
  align-items: center;
  padding-left: 5%; /* 왼쪽 5% 패딩 추가 */
  padding-right: 5%; /* 오른쪽 5% 패딩 추가 */
  box-sizing: border-box;
}

  .footer-content {
    display: flex;
    justify-content: space-between; /* 내용과 페이지 번호 분리 */
    align-items: center;
    width: 100%; /* 푸터 내부에서 전체 너비 사용 */
  }

  .footer-left {
    flex-grow: 1; /* 남은 공간을 채우고 */
    text-align: center; /* 텍스트는 중앙 정렬 */
    font-size: clamp(18px, 2vw, 20px);
    font-weight: normal;
  }

  .footer-page-number {
    flex-shrink: 0; /* 크기 줄어들지 않도록 */
    width: 5%; /* 오른쪽 5% 영역 */
    text-align: right; /* 페이지 번호 오른쪽 정렬 */
    font-size: clamp(18px, 2vw, 20px);
    font-weight: normal;
  }

.slider-wrapper {
height: calc(100vh - clamp(40px, 8vh, 60px) * 2); /* header+footer 제외 */
display: flex;
justify-content: flex-start; /* 왼쪽 정렬로 변경 */
align-items: center;
background: #fff;
padding: 0 10%; /* 좌우 패딩 추가하여 양쪽 슬라이드 보이게 함 */
box-sizing: border-box; /* 패딩이 너비에 포함되도록 */
}

.slider-container {
display: flex;
gap: 20px; /* 슬라이드 간 간격 조절 (원하는 값으로 변경 가능) */
overflow-x: auto;
overflow-y: hidden;
scroll-snap-type: x mandatory;
-webkit-overflow-scrolling: touch;
width: 100%;
height: 100%; /* slider-wrapper의 높이를 채우도록 */
}

.slider-container::-webkit-scrollbar {
display: none;
}
.slider-container {
-ms-overflow-style: none;
scrollbar-width: none;
}

.slide {
flex: 0 0 90%; /* 중앙 슬라이드 80% */
height: 100%; /* slider-container의 높이를 채우도록 */
border: 1px solid black;
scroll-snap-align: start;
display: flex;
justify-content: center;
align-items: center;
font-size: clamp(16px, 3vw, 28px);
font-weight: bold;
background: white;
box-sizing: border-box; /* border가 높이에 포함되도록 */
}
.slide-layout {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
}

.slide-top {
  flex: 1.5; /* 전체 높이 중 2 비율 */
}

.slide-middle {
  flex: 3.5; /* 전체 높이 중 3 비율 */
}

.slide-bottom {
  flex: 1; /* 전체 높이 중 1 비율 */
}

.slide-top,
.slide-middle,
.slide-bottom {
justify-content: center;
  align-items: center;
  border-bottom: 1px solid #ccc;
  font-size: clamp(16px, 2.5vw, 24px);
}
.slide-top {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}
.slide-middle{  display: flex;
text-align: center;
    justify-content: center;
  align-items: center;
}

.top-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* 4등분 */
  
  width: 100%;
  height: 100%;
}

.grid-item {
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: clamp(14px, 2vw, 20px);
}


.slide-bottom {
  border-bottom: none; /* 마지막 영역은 선 제거 */
}

#N, #P {
    font-size: larger;
    font-weight: bold;
      border: 1px solid #ccc;

}

/* 미디어 쿼리 조정 */
@media (max-width: 600px) {
.slide {
 height: 100%; /* 모바일에서도 100% 유지 */
}
  .footer-left {
    font-size: clamp(18px, 2vw, 20px); /* 모바일에서 글꼴 크기 조정 */
  }
  .footer-page-number {
    font-size: clamp(18px, 2vw, 20px); /* 모바일에서 글꼴 크기 조정 */
  }
}
</style>
</head>
<body>
<header>Project Overview...</header>

<div class="slider-wrapper">
 <div class="slider-container" id="sliderContainer">
  </div>
</div>

<footer>
  <div class="footer-content">
    <div class="footer-left">A Moment, A Breath</div>
    <div class="footer-page-number" id="pageNumber">1</div>
  </div>
</footer>

<script>
  const originalSlidesData = [
    "첫 번째 슬라이드",
    "두 번째 슬라이드",
    "세 번째 슬라이드"
  ];
  const sliderContainer = document.getElementById('sliderContainer');
  const pageNumberDisplay = document.getElementById('pageNumber'); // 페이지 번호 표시할 요소
  const gap = 20; // CSS의 gap 값과 일치해야 합니다.

  let slides = []; // 실제 DOM에 있는 슬라이드 요소들

  function createSlideElement(text, index) {
  const slide = document.createElement('div');
  slide.classList.add('slide');
  slide.setAttribute('data-original-index', index);

  if (index === 0) {
    // 1번 슬라이드만 상중하 레이아웃으로
    slide.innerHTML = `
      <div class="slide-layout">
      <div class="slide-top">
        <div class="top-grid">
          <div class="grid-item" id="N">N</div>
          <div class="grid-item">No<br>Now<br>Next<br>Non</div>
          <div class="grid-item">Problem<br>Potential<br>Path<br>stoP</div>
          <div class="grid-item" id="P">P</div>
        </div>
      </div>
      <div class="slide-middle">TEAM NP는 장애를
문제로 바라보지 않는 5인의 전시 기획 매개자 팀입니다.<br>/No Problem/<br>지금 이 순간, 잠재된 힘<br>/Now Potential/<br> 을 믿고, 더 나은 다음의 길<br>/Next Path/<br>을 향해 걸어갑니
다. 가능성이 현실이 될 때까지,TEAM NP는 멈추지
않습니다.<br>/Non stoP/</div>
      <div class="slide-bottom">하단 영역</div>
    </div>
    `;
  } else {
    slide.textContent = text;
  }

  return slide;
}


  function initializeSlider() {
    sliderContainer.innerHTML = ''; // 초기화 시 컨테이너 비우기

    // 원본 슬라이드만 추가 (무한 루프 복제본 없음)
    if (originalSlidesData.length > 0) {
      originalSlidesData.forEach((text, index) => {
        sliderContainer.appendChild(createSlideElement(text, index));
      });
    }

    slides = Array.from(sliderContainer.children); // DOM에 있는 모든 슬라이드 요소들을 배열로 저장

    // 초기 페이지 번호 업데이트
    if (slides.length > 0) {
      updatePageNumber(1); // 1페이지로 시작
    }
  }

  // 페이지 번호를 업데이트하는 함수
  function updatePageNumber(currentNum) {
    pageNumberDisplay.textContent = `${currentNum}`;
  }

    // Intersection Observer를 사용하여 현재 보이는 슬라이드를 정확히 감지
    // 이 방식은 scroll-snap과 잘 작동하며 가장 정확한 현재 슬라이드를 파악합니다.
    const observerOptions = {
        root: sliderContainer, // 슬라이더 컨테이너를 루트로 설정 (스크롤 영역)
        // rootMargin을 조절하여 슬라이드 중앙 부분이 뷰포트 중앙에 들어왔을 때를 감지
        // 90% 너비 슬라이드에 좌우 10% 패딩이 있으므로, 중앙 슬라이드가 관찰 영역에 50% 이상 보일 때
        // 가장 가운데 슬라이드로 판단하기 위해 rootMargin을 조정합니다.
        // 예를 들어, 뷰포트의 좌우 끝 10%씩을 제외한 중앙 80% 영역을 관찰하도록 설정
        // -webkit-overflow-scrolling: touch;
        // width: 100%;
        // padding: 0 10%; 에 따라 정확한 마진 조절이 중요합니다.
        // `scroll-snap-align: start;` 이므로 슬라이드의 시작 지점을 기준으로 감지하는 것이 더 정확할 수 있습니다.
        // 여기서는 슬라이드 시작점이 컨테이너의 (왼쪽 패딩 + gap) 지점에 스냅됩니다.
        rootMargin: '0px', // 전체 스크롤 가능한 영역을 관찰
        threshold: 0.8 // 슬라이드의 80% 이상이 뷰포트에 보일 때 감지
    };

    const slideObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            // isIntersecting은 요소가 rootMargin 내에 진입했는지 여부
            // intersectionRatio는 요소가 root 내에서 보이는 비율
            if (entry.isIntersecting && entry.intersectionRatio >= 0.8) {
                const currentSlideIndex = parseInt(entry.target.getAttribute('data-original-index'));
                updatePageNumber(currentSlideIndex + 1); // 1부터 시작하는 페이지 번호로 업데이트
            }
        });
    }, observerOptions);

  // 페이지 로드 시 슬라이더 초기화 및 Observer 등록
  document.addEventListener('DOMContentLoaded', () => {
    initializeSlider();
        // 각 슬라이드를 Observer에 등록
        slides.forEach(slide => {
            slideObserver.observe(slide);
        });
  });
</script>
</body>
</html>